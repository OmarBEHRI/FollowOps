{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowOps - Détails du Projet</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Inter:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900">
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
        :root {
            --primary-color: #A08D80;
            --secondary-color: #D4CCC1;
            --text-color-dark: #3F3C3A;
            --text-color-medium: #6E6864;
            --text-color-light: #9C9591;
            --bg-light: #FBF9F7;
            --bg-white: #FFFFFF;
            --border-color: #EBE5E0;
            --status-active-bg: #EAE6DF;
            --status-active-text: #6E6864;
            --status-inactive-bg: #F7EAE3;
            --status-inactive-text: #A08D80;
            --nav-link-color: #191610;
            --nav-link-hover-bg: #f1efe9;
            --nav-link-active-bg: #f1efe9;
            --nav-link-active-color: #191610;
            --button-bg-light: #F0EDE9;
            --shadow-light: rgba(0, 0, 0, 0.03);
            --card-bg: #FBF9F7;
            --card-border: #EBE5E0;
            --light-text: #9C9591;
            --dark-text: #191610;
            --tab-inactive-bg: transparent;
            --tab-inactive-text: #6E6864;
            --tab-active-bg: #FBF9F7; /* Matches card background */
            --tab-active-text: #191610;
            --tag-bg: #EAE6DF;
            --tag-text: #6E6864;
        }
        body {
            font-family: 'Inter', 'Noto Sans', sans-serif;
            background-color: var(--bg-white); /* Changé de #f7f5f3 vers var(--bg-white) */
            color: var(--dark-text);
        }
        
        /* Main content area */
        .content-area {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            background-color: var(--bg-white); /* Changé de #f7f5f3 vers var(--bg-white) */
            width: 100%;
        }
        /* Project Header */
        .project-header-section {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 1rem;
            width: 100%; /* Utilise toute la largeur */
        }
        .project-title-group h1 {
            font-size: 1.6rem; /* text-2xl */
            font-weight: 700;
            color: var(--dark-text);
            line-height: 1.2;
            margin-bottom: 0.25rem;
        }
        .project-title-group p {
            font-size: 0.9375rem; /* text-base */
            color: var(--text-color-medium);
            line-height: 1.4;
        }
        .modify-button {
            padding: 0.625rem 1.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 9999px;
            background-color: transparent;
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .modify-button:hover {
            background-color: var(--status-inactive-bg);
        }

        /* Tabs */
        .tabs-container {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 0.75rem;
        }
        .tab-button {
            padding: 0.75rem 1.25rem;
            font-size: 0.9375rem;
            font-weight: 500;
            color: var(--tab-inactive-text);
            background-color: var(--tab-inactive-bg);
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: color 0.2s ease, border-color 0.2s ease;
        }
        .tab-button:hover {
            color: var(--dark-text);
        }
        .tab-button.active {
            color: var(--tab-active-text);
            border-bottom-color: var(--primary-color);
            font-weight: 600;
        }
            }
        
        /* Styles de la barre de navigation principale (header) */
        header {
            background-color: #f8f9fa;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        /* Styles pour les liens de navigation */
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            color: var(--nav-link-color);
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 9999px;
            transition: background-color 0.2s ease, color 0.2s ease;
            white-space: nowrap;
            text-decoration: none;
        }
        
        .nav-link:hover {
            background-color: var(--nav-link-hover-bg);
        }
        
        .nav-link-active {
            background-color: var(--nav-link-active-bg);
            color: var(--nav-link-active-color);
        }
        
        .nav-link-active:hover {
            background-color: var(--nav-link-active-bg);
            color: var(--nav-link-active-color);
        }
    </style>
  {% block extra_styles %}{% endblock %}
    <style id="profile-dropdown-critical-styles">
        .profile-dropdown-menu { opacity: 0; visibility: hidden; transform: translateY(-10px); }
        .profile-dropdown-menu.show { opacity: 1; visibility: visible; transform: translateY(0); }
    </style>
</head>
<body class="relative flex size-full min-h-screen flex-col bg-[#fbfaf9] group/design-root overflow-x-hidden font-['Inter','Noto_Sans',sans-serif]">
    <div class="layout-container flex h-full grow flex-col">
        <div class="w-full px-6 py-2">
            <main class="layout-content-container flex flex-col max-w-full w-full flex-1">
                <header class="flex flex-col px-10 py-3">
                    <div class="flex items-center justify-between whitespace-nowrap pb-3">
                        <div class="flex items-center gap-4 text-[#191610] flex-1">
                            
                            <a href="#" class="text-lg font-bold leading-tight tracking-[-0.015em] mr-6 text-decoration-none">
          <span style="color: #2c2c2c;">Follow</span><span style="color: #a06217;">Ops</span>
        </a>
                            <nav class="flex items-center gap-4">
                                <a href="/dashboard/" class="nav-link">Tableau de bord</a>
                                <a href="/ressources/" class="nav-link">Ressources</a>
                                <a href="/projects/" class="nav-link nav-link-active">Projets</a>
                                <a href="/tickets/" class="nav-link">Tickets</a>
                                {% if user.appRole == 'ADMIN' %}
                                <a href="/admin/password-resets/" class="nav-link">
                                    <span>Mots de passe</span>
                                </a>
                                {% endif %}
                            </nav>
                        </div>
                        <div class="flex items-center gap-8">
                            <label class="flex flex-col min-w-40 !h-10 max-w-64">
                                <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
                                    <div class="text-[#8c7e5a] flex border-none bg-[#f1efe9] items-center justify-center pl-4 rounded-l-xl border-r-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256"><path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path></svg>
                                    </div>
                                    <input type="search" id="header-search-input-project-details" placeholder="Search" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#191610] focus:outline-0 focus:ring-0 border-none bg-[#f1efe9] focus:border-none h-full placeholder:text-[#8c7e5a] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal">
                                </div>
                            </label>
                            <div class="profile-dropdown-container">
                                <div class="profile-picture bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" style='background-image: url("{% if user.gender == 'female' %}{% static 'Female.svg' %}{% else %}{% static 'Male.svg' %}{% endif %}")'></div>
                                <div class="profile-dropdown-menu">
                                    <a href="/ressources/details/{{ user.id }}" class="profile-dropdown-item">
                                        <svg class="profile-dropdown-icon" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                        </svg>
                                        Voir Profil
                                    </a>
                                    <a href="#" class="profile-dropdown-item" onclick="window.profileDropdown.handleLogout(); return false;">
                                        <svg class="profile-dropdown-icon" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                                        </svg>
                                        Se déconnecter
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 text-[#8c7e5a] text-sm font-medium mt-2">
                        <a href="/projects/" class="hover:underline">Projets</a>
                        <span>/</span>
                        <span>{% block breadcrumb_title %}Détails du projet{% endblock %}</span>
                    </div>
                </header>
                
                <!-- Structure cohérente avec ressourcesDetails.html -->
                <div class="px-10 py-6 flex flex-col gap-4">
                    <div class="flex items-center justify-between">
                        <div class="flex flex-col">
                            <h1 class="text-[#191610] text-2xl font-bold leading-tight">{{ project.title }}</h1>
                            <p class="text-[#8c7e5a] text-base font-medium mt-2">{{ project.description }}</p>
                        </div>
                    </div>
                    
                    <!-- Navigation par onglets -->
                    <div class="flex gap-3 flex-wrap">
                        <div class="tabs-container w-full">
                            <a href="{% url 'projectDetails' pk=pk %}" class="tab-button{% if active_tab == 'info' %} active{% endif %}" id="tab-info">Informations générales</a>
                            <a href="{% url 'projectMembers' pk=pk %}" class="tab-button{% if active_tab == 'membres' %} active{% endif %}" id="tab-membres">Membres d'équipe</a>
                            <a href="{% url 'projectCalendar' pk=pk %}" class="tab-button{% if active_tab == 'calendrier' %} active{% endif %}" id="tab-calendrier">Calendrier</a>
                            <a href="{% url 'projectComments' pk=pk %}" class="tab-button{% if active_tab == 'commentaires' %} active{% endif %}" id="tab-commentaires">Commentaires</a>
                        </div>
                    </div>
                    
                    <!-- Contenu des onglets -->
                    {% block content %}{% endblock %}
                </div>
                
                <!-- Tab Functionality Script -->
                <script>
                    // Tab functionality
                    function showTab(tabName) {
                        // Hide all sections
                        document.getElementById('section-info').style.display = 'none';
                        document.getElementById('section-membres').style.display = 'none';
                        document.getElementById('section-calendrier').style.display = 'none';
                        
                        // Remove active class from all tabs
                        document.querySelectorAll('.tab-button').forEach(tab => {
                            tab.classList.remove('active');
                        });
                        
                        // Show selected section and activate tab
                        document.getElementById('section-' + tabName).style.display = 'block';
                        document.getElementById('tab-' + tabName).classList.add('active');
                    }

                    // Initialize with the active tab from the server
                    document.addEventListener('DOMContentLoaded', function() {
                        {% block active_tab %}showTab('info');{% endblock %}
                    });
                </script>
                
                <!-- Styles CSS pour le bouton modifier -->
                <style>
                .edit-button {
                    display: inline-flex;
                    align-items: center;
                    justify-content: center;
                    gap: 0.5rem;
                    padding: 0.75rem 1.5rem;
                    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                    color: white;
                    border: none;
                    border-radius: 12px;
                    font-size: 0.875rem;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    box-shadow: 0 3px 12px rgba(160, 141, 128, 0.25);
                    min-width: 140px;
                    text-decoration: none;
                    position: relative;
                    overflow: hidden;
                    backdrop-filter: blur(5px);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                }

                .edit-button::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
                    transition: left 0.5s ease;
                }

                .edit-button::after {
                    content: '';
                    position: absolute;
                    inset: 0;
                    background: linear-gradient(135deg, var(--bg-light), transparent);
                    opacity: 0;
                    transition: opacity 0.3s ease;
                    mix-blend-mode: overlay;
                }

                .edit-button:hover {
                    background: linear-gradient(135deg, #8C7B71, var(--primary-color));
                    transform: translateY(-2px) scale(1.02);
                    box-shadow: 0 6px 20px rgba(160, 141, 128, 0.35), 0 0 15px rgba(212, 204, 193, 0.2);
                    border-color: rgba(255, 255, 255, 0.2);
                }

                .edit-button:hover::before {
                    left: 100%;
                }

                .edit-button:hover::after {
                    opacity: 0.1;
                }

                .edit-button:active {
                    transform: translateY(-1px) scale(0.98);
                    box-shadow: 0 3px 12px rgba(160, 141, 128, 0.25);
                    transition: all 0.1s ease;
                }

                .edit-button:focus {
                    outline: none;
                    box-shadow: 0 0 0 3px rgba(160, 141, 128, 0.3), 0 6px 20px rgba(160, 141, 128, 0.25);
                }

                .edit-button svg {
                    transition: transform 0.3s ease;
                    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
                }

                .edit-button:hover svg {
                    transform: rotate(12deg) scale(1.05);
                }

                @keyframes subtle-pulse {
                    0%, 100% { box-shadow: 0 3px 12px rgba(160, 141, 128, 0.25); }
                    50% { box-shadow: 0 4px 16px rgba(160, 141, 128, 0.3); }
                }

                .edit-button:focus {
                    animation: subtle-pulse 2s infinite;
                }
                </style>
            </main>
        </div>
    </div>
    
    <!-- Global Search JavaScript -->
    <script src="{% static 'projects/js/global_search.js' %}?v=2"></script>
    <!-- Profile Dropdown JavaScript -->
    <script src="{% static 'projects/js/profile_dropdown.js' %}"></script>
    <script>
        // Initialize Global Search
        document.addEventListener('DOMContentLoaded', function() {
            new GlobalSearch('header-search-input-project-details');
        });
    </script>
</body>
</html>

    