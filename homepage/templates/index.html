<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FollowOps — Bienvenue</title>

  <!-- Fonts & Tailwind (same approach as before) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

  <style>
    /* ---------- Color palette (nude) ---------- */
    :root{
      --primary: #A08D80;     /* main taupe */
      --accent:  #D4CCC1;     /* lighter accent */
      --text-strong: #191610; /* main heading color */
      --text-medium: #6E6864;
      --page-bg-1: #FBF9F7;   /* base background */
      --page-bg-2: #F7F4F1;   /* subtle gradient stop */
      --border-soft: #EBE5E0;
      --muted: #9C9591;
      --shadow: rgba(15,12,10,0.04);
    }

    /* ---------- Page baseline ---------- */
    html,body{height:100%}
    body{
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin:0;
      color:var(--text-strong);
      background: linear-gradient(180deg, var(--page-bg-1) 0%, var(--page-bg-2) 100%);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* ---------- Layout helpers ---------- */
    .container-max{ max-width:1180px; margin-inline:auto; padding-inline:24px; }
    header.site-header{ backdrop-filter: blur(4px); position:sticky; top:0; z-index:60; }
    header .inner{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:18px 0; border-bottom:1px solid var(--border-soft); background:transparent; }

    /* ---------- Logo ---------- */
    .brand { display:flex; align-items:center; gap:12px; color:var(--text-strong); text-decoration:none }
    .brand svg { width:36px; height:36px; color:var(--text-strong); }

    /* ---------- Nav ---------- */
    nav a { color:var(--text-medium); text-decoration:none; font-weight:500; padding:8px 12px; border-radius:8px; }
    nav a:hover{ color:var(--text-strong); background: rgba(160,141,128,0.06) }

    /* ---------- Header button (outline) ---------- */
    .btn-outline {
      border:1px solid var(--primary);
      color:var(--primary);
      padding:8px 14px;
      border-radius:10px;
      font-weight:600;
      background:transparent;
      cursor:pointer;
      transition:all .18s ease;
    }
    .btn-outline:hover{ background:var(--primary); color:white; transform:translateY(-1px) }

    /* ---------- Hero ---------- */
    .hero {
      min-height: calc(100vh - 90px);
      display:flex;
      align-items:center;
      padding-block:72px;
      position:relative;
      overflow:visible;
    }
    .hero-grid{ display:grid; grid-template-columns: 1fr 420px; gap:48px; align-items:center; width:100%; }
    @media (max-width:980px){ .hero-grid{ grid-template-columns:1fr; text-align:center; } .hero-visual{ order:2; } }

    .headline{
      font-size:clamp(32px,5vw,48px);
      line-height:1.02;
      margin:0 0 18px 0;
      color:var(--text-strong);
      font-weight:800;
      letter-spacing:-0.02em;
      opacity:0; transform:translateY(18px);
      animation:fadeUp .7s .3s both;
    }
    .subhead{
      color:var(--text-medium);
      font-size:16px;
      margin:0 0 22px 0;
      opacity:0; transform:translateY(18px);
      animation:fadeUp .7s .45s both;
    }
    .hero-actions{ display:flex; gap:12px; align-items:center; margin-top:6px; opacity:0; transform:translateY(18px); animation:fadeUp .7s .6s both; }
    .btn-primary {
      background:var(--primary);
      color:white;
      padding:12px 20px;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
      border:none;
      box-shadow:0 6px 18px rgba(160,141,128,0.12);
      transition:transform .14s ease, box-shadow .14s ease;
    }
    .btn-primary:hover{ transform:translateY(-3px); box-shadow:0 10px 30px rgba(160,141,128,0.14) }
    .btn-ghost { background:transparent; border:1px solid rgba(0,0,0,0.04); padding:10px 16px; border-radius:10px; color:var(--text-medium); font-weight:600; }

    /* ---------- Inline, minimal line-illustration (dashboard hint) ---------- */
    .hero-visual svg { width:100%; max-width:420px; opacity:0.9; color:transparent; }

    /* ---------- Feature cards (these are allowed to have white bg) ---------- */
    .features {
      padding:48px 0;
    }
    .cards { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; margin-top:18px; }
    @media (max-width:1100px){ .cards{ grid-template-columns:repeat(2,1fr);} }
    @media (max-width:680px){ .cards{ grid-template-columns:1fr;} }

    .card {
      background:white;
      border-radius:14px;
      padding:22px;
      border:1px solid var(--border-soft);
      box-shadow: 0 8px 20px var(--shadow);
      transition: transform .18s ease, box-shadow .18s ease, opacity .18s ease;
      opacity:0; transform:translateY(18px) scale(.995);
    }
    .card.visible{ opacity:1; transform:translateY(0) scale(1) }
    .card:hover{ transform:translateY(-6px); box-shadow: 0 16px 36px rgba(8,6,4,0.06) }

    .card .ic { width:48px; height:48px; border-radius:10px; display:inline-flex; align-items:center; justify-content:center; background:linear-gradient(180deg, rgba(160,141,128,0.09), rgba(212,204,193,0.04)); color:var(--primary); margin-bottom:12px; }

    .card h4{ margin:0; font-size:16px; font-weight:700; }
    .card p{ margin-top:8px; color:var(--text-medium); font-size:14px; line-height:1.45; }

    /* ---------- CTA strip (plain background, CTA button visible only) ---------- */
    .cta-strip { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:34px 0; border-top:1px solid var(--border-soft); margin-top:16px; }
    .cta-strip .cta-text { font-weight:700; color:var(--text-strong); }
    .cta-sub { color:var(--text-medium); font-weight:500; font-size:14px }

    /* ---------- Footer ---------- */
    footer { padding:26px 0; color:var(--text-medium); font-size:14px; border-top:1px solid var(--border-soft); margin-top:18px; }

    /* ---------- Modal (allowed) ---------- */
    .modal-overlay{ position:fixed; inset:0; background:rgba(10,10,10,0.35); display:flex; align-items:center; justify-content:center; z-index:200; opacity:0; pointer-events:none; transition:opacity .18s ease; }
    .modal-overlay.active{ opacity:1; pointer-events:auto; }
    .modal {
      width:100%; max-width:480px; background:white; border-radius:12px; padding:22px; box-shadow:0 20px 60px rgba(8,6,4,0.18);
      transform:translateY(10px); transition:transform .18s ease;
    }
    .modal-overlay.active .modal{ transform:translateY(0) }
    
    /* Prevent layout shift when modal opens */
    body.modal-open {
      overflow: hidden;
      padding-right: var(--scrollbar-width, 0px);
    }

    /* ---------- Background animated shapes ---------- */
    .bg-shapes { position:absolute; inset:0; pointer-events:none; z-index:0; overflow:visible; }
    .shape{
      position:absolute;
      opacity:0.12;
      filter: drop-shadow(0 6px 18px rgba(12,10,8,0.03));
      transform-origin:center;
      will-change: transform, opacity;
    }
    /* scale-in then floating animation */
    .shape.enter {
      animation:shapeScaleIn .85s cubic-bezier(.2,.9,.2,1) forwards, shapeFloat linear 6s infinite alternate;
    }
    @keyframes shapeScaleIn {
      from{ transform: scale(3) translateY(30px) rotate(0deg); opacity:0 }
      to  { transform: scale(1) translateY(0) rotate(0deg); opacity:0.12 }
    }
    @keyframes shapeFloat {
      0% { transform: translateY(0) rotate(0deg) }
      50% { transform: translateY(-16px) rotate(6deg) }
      100% { transform: translateY(0) rotate(-3deg) }
    }
    /* Slightly different tempos for variety */
    .shape.slow { animation-duration: 10s }
    .shape.fast { animation-duration: 5.6s }

    /* ---------- Small utilities & animations ---------- */
    @keyframes fadeUp {
      from { opacity:0; transform: translateY(18px) }
      to   { opacity:1; transform: translateY(0) }
    }

    /* Prevent accidental white boxes -- all sections inherit background (cards are explicit) */
    section, header, footer, .hero { background: transparent; }

    /* Accessibility focus outlines */
    a:focus, button:focus, input:focus { outline: 3px solid rgba(160,141,128,0.16); outline-offset:2px; }

    /* small responsive tweaks */
    @media (max-width:560px){
      .headline{ font-size:28px }
      .hero-grid{ gap:22px }
    }
  </style>
</head>
<body>
  <!-- BACKGROUND SHAPES (absolutely positioned) -->
  <div class="bg-shapes" aria-hidden="true">
    <!-- big soft tilted square (left top) -->
    <svg class="shape slow enter" id="shape-1" style="left:16%; top:20%; width:50px; height:50px; color:var(--primary); transform:rotate(18deg)" viewBox="0 0 100 100" fill="none" role="presentation">
      <rect x="0" y="0" width="100" height="100" rx="13" fill="currentColor"></rect>
    </svg>

    <!-- rounded circle (right upper) -->
    <svg class="shape fast enter" id="shape-2" style="right:6%; top:8%; width:100px; height:100px; color:var(--accent);" viewBox="0 0 100 100" role="presentation">
      <circle cx="50" cy="50" r="50" fill="currentColor"></circle>
    </svg>

    <!-- plus sign (mid-left) -->
    <svg class="shape slow enter" id="shape-3" style="left:3%; top:43%; width:120px; height:120px; color:var(--primary)" viewBox="0 0 100 100" role="presentation">
      <path d="M42 18h16v24h24v16H58v24H42V58H18V42h24z" fill="currentColor"></path>
    </svg>

    <!-- small triangle (right bottom) -->
    <svg class="shape fast enter" id="shape-4" style="right:8%; bottom:10%; width:80px; height:80px; color:var(--primary)" viewBox="0 0 100 100" role="presentation">
      <path d="M50 8 L90 88 H10 Z" fill="currentColor"></path>
    </svg>
  </div>
  <!-- HEADER -->
  <header class="site-header">
    <div class="container-max inner">
      <a class="brand" href="#">
        <span style="font-weight:800; font-size:18px">
          <span style="color: #2c2c2c;">Follow</span><span style="color: #a06217;">Ops</span>
        </span>
      </a>

      <div style="display:flex; gap:6px; align-items:center;">
        <button id="loginBtn" class="btn-outline ml-4">Se connecter</button>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main class="hero container-max" role="main" aria-labelledby="homepage-title">
    <div class="hero-grid" style="z-index:5; position:relative;">
      <div>
        <h1 id="homepage-title" class="headline">Unifiez vos projets, tickets et ressources pour une gestion sans friction.</h1>
        <p class="subhead">FollowOps centralise la gestion des projets, le suivi des tickets et l'activité des ressources pour vous donner de la visibilité et accélérer la livraison.</p>

        <div class="hero-actions" role="region" aria-label="Actions">
          <button id="startBtn" class="btn-primary" aria-haspopup="dialog">Commencer</button>
          <a href="#features" class="btn-ghost">Découvrir</a>
        </div>

        <!-- three subtle benefit bullets (inline) -->
        <div style="display:flex; gap:14px; margin-top:24px; align-items:center; color:var(--text-medium); font-weight:600; font-size:14px;">
          <span>• KPIs en temps réel</span>
          <span>• Collaboration simple</span>
          <span>• Contrôle Admin avancé</span>
        </div>
      </div>

      <!-- small line-illustration: thin dashboard sketch (stroke only) -->
      <div class="hero-visual" aria-hidden="true" style="opacity:0.95;">
        <svg viewBox="0 0 500 380" width="420" height="340" fill="none" xmlns="http://www.w3.org/2000/svg">
          <!-- light strokes in taupe -->
          <g stroke="rgba(64,56,52,0.14)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="12" y="28" width="360" height="240" rx="10" />
            <rect x="390" y="32" width="98" height="48" rx="8" />
            <rect x="390" y="92" width="98" height="40" rx="8" />
            <rect x="390" y="146" width="98" height="120" rx="8" />
            <path d="M40 70 H340" />
            <circle cx="80" cy="170" r="28" />
            <path d="M125 150 L285 150 L285 210 L125 210 Z" />
          </g>
          <!-- small accent strokes -->
          <g stroke="rgba(160,141,128,0.12)" stroke-width="2">
            <path d="M60 100 L120 80" stroke-linecap="round"/>
            <path d="M160 120 L220 100"/>
          </g>
        </svg>
      </div>
    </div>
  </main>

  <!-- FEATURES -->
  <section id="features" class="features container-max" aria-labelledby="features-title">
    <h3 id="features-title" style="font-size:22px; font-weight:800; color:var(--text-strong)">Fonctionnalités clés</h3>
    <p style="margin-top:8px; color:var(--text-medium); max-width:880px;">Conçu pour administrateurs, managers et équipes opérationnelles : visibilité, collaboration et contrôle — sans complexité inutile.</p>

    <div class="cards" style="margin-top:18px;">
      <article class="card" data-order="0">
        <h4>Tableaux de bord & KPIs</h4>
        <p>Suivez l'avancement des projets et la disponibilité des ressources grâce à des indicateurs actionnables.</p>
      </article>

      <article class="card" data-order="1">
        <h4>Gestion de projets</h4>
        <p>Créez, assignez et suivez les étapes de vos projets, avec historique d'activités et commentaires.</p>
      </article>

      <article class="card" data-order="2">
        <h4>Tickets & SLA</h4>
        <p>Priorisez et résolvez les incidents rapidement, avec suivi du temps et notifications par rôle.</p>
      </article>

      <article class="card" data-order="3">
        <h4>Suivi des ressources</h4>
        <p>Visualisez les affectations, activités et performances de chaque ressource (employé) en un coup d'œil.</p>
      </article>
    </div>
  </section>

  <!-- CTA strip (single row) -->
  <section class="container-max cta-strip" aria-hidden="false">
    <div>
      <div class="cta-text">Prêt à transformer vos opérations ?</div>
      <div class="cta-sub">Essayez FollowOps avec un essai gratuit — configurez vos premiers projets en quelques minutes.</div>
    </div>
    <div>
      <button id="startBtn2" class="btn-primary">Commencer</button>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="container-max" role="contentinfo">
    <div style="display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap;">
      <div style="display:flex; gap:18px; align-items:center;">
        <a href="#" style="font-weight:700; color:var(--text-strong)">
          <span style="color: #2c2c2c;">Follow</span><span style="color: #ff8c00;">Ops</span>
        </a>
        <a href="#" style="color:var(--text-medium)">Politique de confidentialité</a>
        <a href="#" style="color:var(--text-medium)">Conditions d'utilisation</a>
      </div>
      <div style="color:var(--text-medium)">© 2023 FollowOps. Tous droits réservés.</div>
    </div>
  </footer>

  <!-- LOGIN MODAL (kept as functional with same ids for your backend logic) -->
  <div id="loginModal" class="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="login-title">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px">
        <h3 id="login-title" style="margin:0; font-size:18px; font-weight:800">Connexion</h3>
        <button id="closeModal" style="background:none; border:none; font-size:22px; color:var(--muted); cursor:pointer">&times;</button>
      </div>
      <form id="loginForm" method="post" action="/login/">
        {% csrf_token %}
        <div style="margin-bottom:12px">
          <label for="login-email" style="display:block; font-weight:600; color:var(--text-strong); margin-bottom:6px">Email</label>
          <input id="login-email" name="email" type="email" required style="width:100%; padding:10px 12px; border-radius:8px; border:1px solid var(--border-soft); background:var(--page-bg-1);">
        </div>
        <div style="margin-bottom:8px">
          <label for="login-password" style="display:block; font-weight:600; color:var(--text-strong); margin-bottom:6px">Mot de passe</label>
          <input id="login-password" name="password" type="password" required style="width:100%; padding:10px 12px; border-radius:8px; border:1px solid var(--border-soft); background:var(--page-bg-1);">
        </div>
        <div style="display:flex; justify-content:space-between; align-items:center; margin:12px 0;">
          <a href="/password-reset/" style="color:var(--primary); font-weight:600; font-size:13px">Mot de passe oublié?</a>
        </div>
        <button type="submit" style="width:100%; background:var(--primary); color:white; padding:12px; border-radius:10px; font-weight:800; border:none;">Se connecter</button>
      </form>
    </div>
  </div>

  <!-- SCRIPTS: animations + modal + login -->
  <script>
    // -- ensure shapes animate in after paint for nice effect
    window.addEventListener('load', () => {
      document.querySelectorAll('.shape').forEach((el, i) => {
        // staggered entry timing
        setTimeout(()=> el.classList.add('enter'), 120 * i);
      });
    });

    // -- cards staggered reveal using IntersectionObserver --
    const cardEls = Array.from(document.querySelectorAll('.card'));
    const cardObserver = new IntersectionObserver((entries) => {
      entries.forEach(en => {
        if (en.isIntersecting){
          const el = en.target;
          const order = Number(el.getAttribute('data-order')||0);
          // add visible with a stagger
          setTimeout(()=> el.classList.add('visible'), order * 140);
          cardObserver.unobserve(el);
        }
      });
    }, {threshold:0.18});
    cardEls.forEach(c => cardObserver.observe(c));

    // Calculate scrollbar width to prevent layout shift
    function getScrollbarWidth() {
        const outer = document.createElement('div');
        outer.style.visibility = 'hidden';
        outer.style.overflow = 'scroll';
        outer.style.msOverflowStyle = 'scrollbar';
        document.body.appendChild(outer);
        
        const inner = document.createElement('div');
        outer.appendChild(inner);
        
        const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;
        outer.parentNode.removeChild(outer);
        
        return scrollbarWidth;
    }

    // Modal functions
    function openModal() {
        const loginModal = document.getElementById('loginModal');
        const scrollbarWidth = getScrollbarWidth();
        
        // Set CSS custom property for scrollbar width
        document.documentElement.style.setProperty('--scrollbar-width', scrollbarWidth + 'px');
        
        loginModal.style.display = 'flex';
        setTimeout(() => {
            loginModal.classList.add('active');
            loginModal.removeAttribute('aria-hidden');
            document.body.classList.add('modal-open');
        }, 10);
    }

    function closeModal() {
        const loginModal = document.getElementById('loginModal');
        loginModal.classList.remove('active');
        loginModal.setAttribute('aria-hidden', 'true');
        document.body.classList.remove('modal-open');
        setTimeout(() => loginModal.style.display = 'none', 220);
    }

    // Initialize modal events when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      const loginBtn = document.getElementById('loginBtn');
      const startBtn = document.getElementById('startBtn');
      const startBtn2 = document.getElementById('startBtn2');
      const closeBtn = document.getElementById('closeModal');
      const loginModal = document.getElementById('loginModal');
      const loginForm = document.getElementById('loginForm');
      
      // Attach click events to buttons
      if (loginBtn) loginBtn.addEventListener('click', openModal);
      if (startBtn) startBtn.addEventListener('click', openModal);
      if (startBtn2) startBtn2.addEventListener('click', openModal);
      if (closeBtn) closeBtn.addEventListener('click', closeModal);
      
      // Close modal when clicking outside
      if (loginModal) {
        loginModal.addEventListener('click', function(e) {
          if (e.target === this) {
            closeModal();
          }
        });
      }

      // Handle form submission
      if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const email = document.getElementById('login-email').value;
          const password = document.getElementById('login-password').value;
          const csrfEl = document.querySelector('[name=csrfmiddlewaretoken]');
          const csrf = csrfEl ? csrfEl.value : null;
          
          fetch('/login/', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': csrf
            },
            body: JSON.stringify({ email, password })
          })
          .then(response => {
            if (response.ok) {
              window.location.href = '/dashboard/';
            } else {
              return response.json();
            }
          })
          .then(data => {
            if (data && data.error) {
              alert(data.error);
            }
          })
          .catch(error => {
            console.error('Erreur:', error);
          });
        });
      }
    });

    // Optional: gentle parallax on mouse move (subtle). Remove if you prefer static.
    (function(){
      const shapes = document.querySelectorAll('.shape');
      const limit = 18; // px max movement
      window.addEventListener('pointermove', (ev) => {
        const cw = window.innerWidth, ch = window.innerHeight;
        const nx = (ev.clientX / cw) - 0.5;
        const ny = (ev.clientY / ch) - 0.5;

        shapes.forEach((s, i) => {
          const depth = (i % 2 === 0) ? 0.5 : 1.0;
          const tx = (-nx * limit * depth);
          const ty = (-ny * limit * depth);
          s.style.transform = `translate(${tx}px, ${ty}px) scale(1) rotate(${(i * 7) - 10}deg)`;
        });
      });
    })();

    // Smooth scroll for Découvrir button
    const discoverBtn = document.querySelector('a[href="#features"]');
    if (discoverBtn) {
      discoverBtn.addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('features').scrollIntoView({
          behavior: 'smooth'
        });
      });
    }
  </script>



</body>
</html>
